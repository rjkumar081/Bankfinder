<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>IFSC Code Finder</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    body { font-family: Arial; background: #f1f5f9; padding: 20px; }
    .container {
      max-width: 650px; margin: auto; background: white;
      padding: 20px; border-radius: 10px; box-shadow: 0 0 10px #ccc;
    }
    h2 { text-align: center; }
    select, input[type="text"] {
      width: 100%; padding: 10px; margin: 10px 0;
      border-radius: 6px; font-size: 16px;
    }
    #result, #ifscResult {
      margin-top: 20px; background: #e8f0fe;
      padding: 15px; border-radius: 8px;
    }
  </style>
</head>
<body>
  <div class="container">
    <h2>üîç IFSC Code Finder</h2>

    <!-- Dropdown Selection -->
    <select id="bankSelect"><option>Select Bank</option></select>
    <select id="stateSelect"><option>Select State</option></select>
    <select id="citySelect"><option>Select City</option></select>
    <select id="branchSelect"><option>Select Branch</option></select>
    <div id="result"></div>

    <hr>

    <!-- IFSC Search -->
    <h3>üîé Search by IFSC Code</h3>
    <input type="text" id="ifscInput" placeholder="Enter IFSC Code (e.g., SBIN0001707)">
    <div id="ifscResult"></div>
  </div>

  <script>
    const DATA_URL = "bankdata.json";
    let bankData = [];

    async function loadData() {
      const res = await fetch(DATA_URL);
      bankData = await res.json();
      const banks = [...new Set(bankData.map(i => i.BANK))].sort();
      populate("bankSelect", banks);
    }

    function populate(id, items) {
      const el = document.getElementById(id);
      el.innerHTML = `<option>Select ${id.replace("Select","")}</option>` + items.map(i => `<option>${i}</option>`).join('');
    }

    document.getElementById("bankSelect").addEventListener("change", () => {
      const bank = document.getElementById("bankSelect").value;
      const states = [...new Set(bankData.filter(i => i.BANK === bank).map(i => i.STATE))].sort();
      populate("stateSelect", states);
      populate("citySelect", []);
      populate("branchSelect", []);
      document.getElementById("result").innerHTML = "";
    });

    document.getElementById("stateSelect").addEventListener("change", () => {
      const bank = document.getElementById("bankSelect").value;
      const state = document.getElementById("stateSelect").value;
      const cities = [...new Set(bankData.filter(i => i.BANK === bank && i.STATE === state).map(i => i.CITY))].sort();
      populate("citySelect", cities);
      populate("branchSelect", []);
      document.getElementById("result").innerHTML = "";
    });

    document.getElementById("citySelect").addEventListener("change", () => {
      const bank = document.getElementById("bankSelect").value;
      const state = document.getElementById("stateSelect").value;
      const city = document.getElementById("citySelect").value;
      const branches = [...new Set(bankData.filter(i => i.BANK === bank && i.STATE === state && i.CITY === city).map(i => i.BRANCH))].sort();
      populate("branchSelect", branches);
      document.getElementById("result").innerHTML = "";
    });

    document.getElementById("branchSelect").addEventListener("change", () => {
      const bank = document.getElementById("bankSelect").value;
      const state = document.getElementById("stateSelect").value;
      const city = document.getElementById("citySelect").value;
      const branch = document.getElementById("branchSelect").value;
      const match = bankData.find(i =>
        i.BANK === bank && i.STATE === state && i.CITY === city && i.BRANCH === branch
      );
      if (match) {
        document.getElementById("result").innerHTML = `
          <strong>Bank:</strong> ${match.BANK}<br>
          <strong>IFSC:</strong> ${match.IFSC}<br>
          <strong>Branch:</strong> ${match.BRANCH}<br>
          <strong>Address:</strong> ${match.ADDRESS}<br>
          <strong>City:</strong> ${match.CITY}<br>
          <strong>District:</strong> ${match.DISTRICT}<br>
          <strong>State:</strong> ${match.STATE}
        `;
      }
    });

    document.getElementById("ifscInput").addEventListener("input", () => {
      const ifsc = document.getElementById("ifscInput").value.trim().toUpperCase();
      const match = bankData.find(i => i.IFSC === ifsc);
      if (match) {
        document.getElementById("ifscResult").innerHTML = `
          <strong>Bank:</strong> ${match.BANK}<br>
          <strong>IFSC:</strong> ${match.IFSC}<br>
          <strong>Branch:</strong> ${match.BRANCH}<br>
          <strong>Address:</strong> ${match.ADDRESS}<br>
          <strong>City:</strong> ${match.CITY}<br>
          <strong>District:</strong> ${match.DISTRICT}<br>
          <strong>State:</strong> ${match.STATE}
        `;
      } else {
        document.getElementById("ifscResult").innerHTML = ifsc.length > 5 ? "‚ùå IFSC not found" : "";
      }
    });

    loadData();
  </script>
</body>
</html>
