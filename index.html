<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>IFSC Finder</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f2f2f2;
      margin: 0;
      padding: 20px;
    }

    .tabs {
      display: flex;
      gap: 10px;
      margin-bottom: 20px;
      justify-content: center;
    }

    .tab-button {
      padding: 10px 20px;
      cursor: pointer;
      background: #1a73e8;
      color: white;
      border: none;
      border-radius: 5px;
    }

    .tab-button.active {
      background: #0f5acc;
    }

    .tab-content {
      display: none;
      background: white;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      max-width: 600px;
      margin: auto;
    }

    .tab-content.active {
      display: block;
    }

    .result-card {
      background: #f9f9f9;
      border: 1px solid #ddd;
      padding: 15px;
      border-radius: 10px;
      line-height: 1.6;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      max-width: 500px;
      margin: auto;
    }

    .result-card h3 {
      margin-top: 0;
      color: #1a73e8;
    }

    .result-card p {
      margin: 5px 0;
    }
  </style>
</head>

<body>
  <div class="tabs">
    <button class="tab-button active" onclick="showTab('tab1')">Find Bank Details (by IFSC)</button>
    <button class="tab-button" onclick="showTab('tab2')">Find IFSC (by Bank)</button>
  </div>

  <div id="tab1" class="tab-content active">
    <label for="ifsc">Enter IFSC Code:</label>
    <input type="text" id="ifsc" oninput="getBankDetails()" placeholder="e.g. SBIN0005573">
    <div id="result"></div>
  </div>

  <div id="tab2" class="tab-content">
    <label>Bank Name:</label>
    <select id="bankName" onchange="populateStates()"></select>
    <label>State:</label>
    <select id="state" onchange="populateCities()"></select>
    <label>City:</label>
    <select id="city" onchange="populateBranches()"></select>
    <label>Branch:</label>
    <select id="branch" onchange="showIFSC()"></select>
    <div id="offlineResult"></div>
  </div>

  <script>
    function showTab(tabId) {
      document.querySelectorAll('.tab-content').forEach(tab => tab.classList.remove('active'));
      document.querySelectorAll('.tab-button').forEach(btn => btn.classList.remove('active'));
      document.getElementById(tabId).classList.add('active');
      document.querySelector(`.tab-button[onclick="showTab('${tabId}')"]`).classList.add('active');
    }

    function getBankDetails() {
      const ifsc = document.getElementById('ifsc').value.trim();
      const resultBox = document.getElementById('result');
      if (ifsc.length < 5) {
        resultBox.innerHTML = '';
        return;
      }
      fetch(`https://ifsc.razorpay.com/${ifsc}`)
        .then(response => response.json())
        .then(data => {
          if (data && data.BANK) {
            resultBox.innerHTML = `
              <div class="result-card">
                <h3>${data.BANK} - ${data.BRANCH}</h3>
                <p><strong>IFSC:</strong> ${data.IFSC}</p>
                <p><strong>Address:</strong> ${data.ADDRESS}</p>
                <p><strong>City:</strong> ${data.CITY}</p>
                <p><strong>District:</strong> ${data.DISTRICT}</p>
                <p><strong>State:</strong> ${data.STATE}</p>
                <p><strong>MICR:</strong> ${data.MICR || 'N/A'}</p>
                <p><strong>UPI:</strong> ${data.UPI ? 'Available' : 'Not Available'}</p>
                <p><strong>NEFT:</strong> ${data.NEFT ? 'Available' : 'Not Available'}</p>
                <p><strong>RTGS:</strong> ${data.RTGS ? 'Available' : 'Not Available'}</p>
                <p><strong>IMPS:</strong> ${data.IMPS ? 'Available' : 'Not Available'}</p>
              </div>
            `;
          } else {
            resultBox.innerHTML = '<p style="color:red">Invalid IFSC code or not found.</p>';
          }
        })
        .catch(() => {
          resultBox.innerHTML = '<p style="color:red">Error fetching data. Please try again.</p>';
        });
    }

    let bankData;
    fetch('assets/bankdata.json')
      .then(res => res.json())
      .then(data => {
        bankData = data;
        populateBankNames();
      });

    function populateBankNames() {
      const bankNameSelect = document.getElementById('bankName');
      const banks = [...new Set(bankData.map(item => item.BANK))];
      bankNameSelect.innerHTML = '<option value="">Select Bank</option>' + banks.map(b => `<option value="${b}">${b}</option>`).join('');
    }

    function populateStates() {
      const stateSelect = document.getElementById('state');
      const selectedBank = document.getElementById('bankName').value;
      const states = [...new Set(bankData.filter(item => item.BANK === selectedBank).map(item => item.STATE))];
      stateSelect.innerHTML = '<option value="">Select State</option>' + states.map(s => `<option value="${s}">${s}</option>`).join('');
      document.getElementById('city').innerHTML = '';
      document.getElementById('branch').innerHTML = '';
      document.getElementById('offlineResult').innerHTML = '';
    }

    function populateCities() {
      const citySelect = document.getElementById('city');
      const selectedBank = document.getElementById('bankName').value;
      const selectedState = document.getElementById('state').value;
      const cities = [...new Set(bankData.filter(item => item.BANK === selectedBank && item.STATE === selectedState).map(item => item.CITY))];
      citySelect.innerHTML = '<option value="">Select City</option>' + cities.map(c => `<option value="${c}">${c}</option>`).join('');
      document.getElementById('branch').innerHTML = '';
      document.getElementById('offlineResult').innerHTML = '';
    }

    function populateBranches() {
      const branchSelect = document.getElementById('branch');
      const selectedBank = document.getElementById('bankName').value;
      const selectedState = document.getElementById('state').value;
      const selectedCity = document.getElementById('city').value;
      const branches = bankData.filter(item => item.BANK === selectedBank && item.STATE === selectedState && item.CITY === selectedCity);
      const branchNames = [...new Set(branches.map(item => item.BRANCH))];
      branchSelect.innerHTML = '<option value="">Select Branch</option>' + branchNames.map(b => `<option value="${b}">${b}</option>`).join('');
      document.getElementById('offlineResult').innerHTML = '';
    }

    function showIFSC() {
      const selectedBank = document.getElementById('bankName').value;
      const selectedState = document.getElementById('state').value;
      const selectedCity = document.getElementById('city').value;
      const selectedBranch = document.getElementById('branch').value;
      const resultBox = document.getElementById('offlineResult');
      const match = bankData.find(item => item.BANK === selectedBank && item.STATE === selectedState && item.CITY === selectedCity && item.BRANCH === selectedBranch);
      if (match) {
        resultBox.innerHTML = `
          <div class="result-card">
            <h3>${match.BANK} - ${match.BRANCH}</h3>
            <p><strong>IFSC:</strong> ${match.IFSC}</p>
            <p><strong>Address:</strong> ${match.ADDRESS}</p>
            <p><strong>City:</strong> ${match.CITY}</p>
            <p><strong>District:</strong> ${match.DISTRICT}</p>
            <p><strong>State:</strong> ${match.STATE}</p>
          </div>
        `;
      } else {
        resultBox.innerHTML = '<p style="color:red">No data found.</p>';
      }
    }
  </script>
</body>

</html>
